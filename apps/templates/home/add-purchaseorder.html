{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
<div class="content">
	<div class="page-inner">
		<div class="page-header">
			<h4 class="page-title">Purchase Order</h4>
			<ul class="breadcrumbs">
				<li class="nav-home">
					<a href="/">
						<i class="flaticon-home"></i>
					</a>
				</li>
				<li class="separator">
					<i class="flaticon-right-arrow"></i>
				</li>
				<li class="nav-item">
					<a href="/offer-addoffer">Purchase Order</a>
				</li>
				<li class="separator">
					<i class="flaticon-right-arrow"></i>
				</li>
				<li class="nav-item">
					<a href="/offer-offerlist">Add PO</a>
				</li>
			</ul>
		</div>

		<section class="content">
			<div _ngcontent-owj-c93="" class="page-section">
				<div _ngcontent-owj-c93="" class="card card-fluid">
					<div class="card-header"> Purchase Order
						Details </div>
					<div class="card-body">
						<div class="col-sm-12">
							<div class="row">

								<div class="form-group col-sm-4">
									<label>Supplier Name<span style="color: red;">*</span></label>
									<div class="ng-select-container ng-has-value">
										<div class="ng-value-container">
											<div class="ng-placeholder">
												<select name="main_usr_select" class="form-control">
													{% for user in users %}
													<option>{{ user.supplier_name }}
													</option>
													{% endfor %}
												</select>
											</div>
										</div>
									</div>
								</div>
								<div class="form-group col-sm-4">
									<label for="serialNo">Reference No</label>
									<input type="text" maxlength="200" autocomplete="off"
										class="form-control ng-pristine ng-valid ng-touched">
								</div>
								<div class="form-group col-sm-4">
									<label for="publisher">Date</label>
									<div class="input-group date">
										<input type="date" autocomplete="off"
											class="form-control pull-right ng-untouched ng-pristine ng-valid">
									</div>
								</div>
							</div>
							<div class="row">
								<div class="form-group col-sm-4">
									<label for="bookTitle">PO Type<span style="color: red;">*</span></label>
									<select class="form-control offertype_id">
										<option value="">Select PO Type</option>
										<option value="Standard"> Standard</option>
										<option value="Customized"> Customized</option>
									</select>
								</div>
								<div class="form-group col-sm-3">
									<label>Currency Types<span style="color: red;">*</span></label>
									<select class="form-control ng-dirty ng-valid ng-touched">
										<option value="None">Select Currency Type</option>
										{% for user in user1 %}
										<option>{{ user.currency_name }}
										</option>
										{% endfor %}
									</select>
								</div>
							</div>
							<!-- <div  class="row">
								<div  class="form-group col-sm-2">
									<label >OC / BOM
										Type</label><select  formcontrolname="ocType"
										class="form-control ng-valid ng-dirty ng-touched" fdprocessedid="9ttnx8">
										<option  value="">Select
											Type</option>
										<option  value="1">OC
										</option>
										<option  value="2">BOM
										</option>
									</select>
								</div>
							</div> -->
						</div>
					</div>
				</div>
			</div>
		</section>


		<section class="content">
			<div _ngcontent-owj-c93="" class="page-section">
				<div class="card card-fluid">
					<div class="card-body">
						<div style="overflow-x: auto;">
							<table id="product-table" style="width: 130%;">

							</table>
							<br><br>
						</div>
					</div>
				</div>
		</section>

		<section _ngcontent-owj-c93="" class="content">
			<div _ngcontent-owj-c93="" class="page-section">
				<div _ngcontent-owj-c93="" class="card card-fluid">
					<div _ngcontent-owj-c93="" class="card-body">
						<div class="form-group">
							<tr>
								<label> Kind Attn. </label>
								<td style="width: 70%;"><textarea rows="2" formcontrolname="subject"
										class="form-control ng-untouched ng-pristine ng-valid"></textarea>
								</td>
							</tr>
						</div>
						<div class="form-group">
							<tr>
								<label> Description </label>
								<td style="width: 70%;"><textarea rows="2" formcontrolname="description"
										class="form-control ng-untouched ng-pristine ng-valid"></textarea>
								</td>
							</tr>
						</div>
						<div class="form-group">
							<tr>
								<label> Remarks </label>
								<td style="width: 70%;"><textarea rows="2" formcontrolname="remarks"
										class="form-control ng-untouched ng-pristine ng-valid"></textarea>
								</td>
							</tr>
						</div>
					</div>
				</div>
			</div>
		</section>


		<section _ngcontent-owj-c93="" class="content">
			<div _ngcontent-owj-c93="" class="page-section">
				<div _ngcontent-owj-c93="" class="card card-fluid">
					<div _ngcontent-owj-c93="" class="card-body">
						<div class="card-header">
							<div class="card-title">Terms and Conditions :</div>
						</div>
						<div class="form-group">
							<tr>
								<label> Taxes </label>
								<td><input type="text" name="usr_name" class="form-control" /></td>
							</tr>
						</div>
						<div class="form-group">
							<tr>
								<label>Delivery</label>
								<td><input type="text" name="usr_name" class="form-control" /></td>
							</tr>
						</div>
						<div class="form-group">
							<tr>
								<label>TOP</label>
								<td><input type="text" name="usr_name" class="form-control" /></td>
							</tr>
						</div>
						<div class="form-group">
							<tr>
								<label>Notes</label>
								<td><input type="text" name="usr_name" class="form-control" /></td>
							</tr>
						</div>
						<div class="form-group">
							<tr>
								<label>Packing Instruction</label>
								<td><input type="text" name="usr_name" class="form-control" /></td>
							</tr>
						</div>
						<div class="form-group">
							<tr>
								<label>Transportation</label>
								<td><input type="text" name="usr_name" class="form-control" /></td>
							</tr>
						</div>
					</div>
				</div>
			</div>
		</section>
		<div style="text-align: center;">
			<button id="btnSave" type="submit" class="btn btn-primary btn-sm" fdprocessedid="11p0ic">Save</button>
			&nbsp;
			<a routerlink="/PO-POlist" queryparamshandling="preserve" class="btn btn-danger btn-sm"
				href="/PO-POlist">Cancel </a>
		</div>
	</div>
</div>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script>


	function removeProductRow(button) {
		const row = button.closest('tr');
		row.remove();
		updateTotal();
	}

	function addProductRow() {
		const tableBody = document.querySelector('#product-table tbody');
		const newRow = document.createElement('tr');
		newRow.innerHTML = `
		<td style="width: 25%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 5%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 5%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 8%;"> <input type="date" autocomplete="off" class="form-control pull-right ng-untouched ng-pristine ng-valid"> </td> <td style="width: 3%;"> <input class="form-control"> </td> <td style="width: 5%;"> <input class="form-control"> </td> <td style="width: 7%;"> <select class="form-control ng-untouched ng-pristine ng-invalid"> <option value="">UOM </option> <option value="Nos">Nos</option> <option value="Meters">Meters</option> <option value="Millimeter">Millimeter</option> <option value="Bundle">Bundle</option> <option value="Pack">Pack</option> <option value="Kg">Kg</option> <option value="Set">Set</option> </select> </td> <td style="width: 6%;"><input class="form-control ng-untouched ng-pristine ng-invalid"></td> <td style="width: 3%;"><input class="form-control ng-untouched ng-pristine ng-valid"></td> <td style="width: 6%;"><input class="form-control ng-untouched ng-pristine" disabled=""> </td> <td ><button class="btn btn-danger" onclick="removeProductRow(this)">Remove</button></td>
		`;
		tableBody.appendChild(newRow);
		newRow.querySelectorAll('.quantity, .unit-price').forEach(input => {
			input.addEventListener('input', updateTotal);
		});
		// updateTotal();
	}


	let lineNo = 1;
	$(document).ready(function () {
		$(".offertype_id").on("change", function () {
			var selectedOption = $(this).val();
			switch (selectedOption) {
				case "Standard":
					var table = document.getElementById('emptbl');
					markup = $('<thead> <th >Product<span style="color: red;">*</span></th> <th >HSN Code</th> <th >DRW No</th> <th >Due Date</th> <th>Max Order Qty</th> <th >Qty.<span style="color: red;">*</span></th> <th >UOM<span style="color: red;">*</span></th> <th >Rate<span style="color: red;">*</span></th> <th >Disc%</th> <th >Amount (Rs)</th> <th ><a class="btn btn-secondary active add-row"><i class="fa fa-plus"></i></a></th> </thead> <tbody > <tr > <td style="width: 25%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 5%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 5%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 8%;"> <input type="date" autocomplete="off" class="form-control pull-right ng-untouched ng-pristine ng-valid"> </td> <td style="width: 3%;"> <input class="form-control"> </td> <td style="width: 5%;"> <input class="form-control"> </td> <td style="width: 7%;"> <select class="form-control ng-untouched ng-pristine ng-invalid"> <option value="">UOM </option> <option value="Nos">Nos</option> <option value="Meters">Meters</option> <option value="Millimeter">Millimeter</option> <option value="Bundle">Bundle</option> <option value="Pack">Pack</option> <option value="Kg">Kg</option> <option value="Set">Set</option> </select> </td> <td style="width: 6%;"><input class="form-control ng-untouched ng-pristine ng-invalid"></td> <td style="width: 3%;"><input class="form-control ng-untouched ng-pristine ng-valid"></td> <td style="width: 6%;"><input class="form-control ng-untouched ng-pristine" disabled=""> </td> <td style="width: 5%;"></td> </tr> </tbody>')
					tableBody = $("table");
					tableBody.empty();
					tableBody.append(markup);
					break;

				case "Customized":
					var table = document.getElementById('emptbl');
					markup = $('<thead> <th >Product<span style="color: red;">*</span></th> <th >HSN Code</th> <th >DRW No</th> <th >Due Date</th> <th>Max Order Qty</th> <th >Qty.<span style="color: red;">*</span></th> <th >UOM<span style="color: red;">*</span></th> <th >Rate<span style="color: red;">*</span></th> <th >Disc%</th> <th >Amount (Rs)</th> <th ><a class="btn btn-secondary active " onclick="addProductRow()"><i class="fa fa-plus"></i></a></th> </thead> <tbody > <tr > <td style="width: 25%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 5%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 5%;"> <input class="form-control ng-untouched ng-pristine ng-valid"> </td> <td style="width: 8%;"> <input type="date" autocomplete="off" class="form-control pull-right ng-untouched ng-pristine ng-valid"> </td> <td style="width: 3%;"> <input class="form-control"> </td> <td style="width: 5%;"> <input class="form-control"> </td> <td style="width: 7%;"> <select class="form-control ng-untouched ng-pristine ng-invalid"> <option value="">UOM </option> <option value="Nos">Nos</option> <option value="Meters">Meters</option> <option value="Millimeter">Millimeter</option> <option value="Bundle">Bundle</option> <option value="Pack">Pack</option> <option value="Kg">Kg</option> <option value="Set">Set</option> </select> </td> <td style="width: 6%;"><input class="form-control ng-untouched ng-pristine ng-invalid"></td> <td style="width: 3%;"><input class="form-control ng-untouched ng-pristine ng-valid"></td> <td style="width: 6%;"><input class="form-control ng-untouched ng-pristine" disabled=""> </td> <td style="width: 5%;"></td> </tr> </tbody>')

					tableBody = $("table");
					tableBody.empty();
					tableBody.append(markup);
					break;
			}

		});
	});

</script>
<style>
	th,
	td {
		border: 1px solid black;
		padding: 5px;
	}

	.container[_ngcontent-owj-c93] {
		width: 100%
	}
</style>
{% endblock javascripts %}